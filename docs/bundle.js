(()=>{var h=(t,e,n)=>new Promise((a,s)=>{var i=o=>{try{r(n.next(o))}catch(l){s(l)}},m=o=>{try{r(n.throw(o))}catch(l){s(l)}},r=o=>o.done?a(o.value):Promise.resolve(o.value).then(i,m);r((n=n.apply(t,e)).next())});function b(){let e="POSTS-PAGINATION-theme",n=document.querySelector(".theme-toggler"),a=n.querySelector(".light .visually-hidden"),s=n.querySelector(".dark .visually-hidden"),i=n.querySelector("button");function m(){try{let d=localStorage.getItem(e);return d?JSON.parse(d):!1}catch(d){return console.error("Error parsing theme from localStorage:",d),!1}}let r=m();function o(d){r=d,document.documentElement.classList.toggle("darkmode",r),localStorage.setItem(e,r),g()}function l(){o(!r)}function g(){a.textContent=r?" theme active":" theme inactive",s.textContent=r?" theme inactive":" theme active",i.setAttribute("aria-pressed",r?"false":"true")}i.addEventListener("click",l),o(r)}function B(){let t=document.getElementById("loader"),e=document.getElementById("page-loaded");t&&(t.classList.remove("loader-hidden"),e.textContent="",e.setAttribute("aria-hidden","true"))}function E(){let t=document.getElementById("loader"),e=document.getElementById("page-loaded");t&&(t.classList.add("loader-hidden"),t.addEventListener("transitionend",()=>{e.textContent="Page has loaded.",e.setAttribute("aria-hidden","false")},{once:!0}))}function k(){window.addEventListener("load",E)}function C(t,e){for(let n in e)t.setAttribute(n,e[n])}function L(t,e){if(!Array.isArray(t))return console.error("chunkPosts received invalid posts data:",t),[];if(e<=0)return console.error("chunkPosts received invalid chunkSize:",e),[];let n=[];for(let a=0;a<t.length;a+=e)n.push(t.slice(a,a+e));return n}function P(t,e,n){let a=document.getElementById("posts-page-container"),s=document.getElementById("article-post");a.innerHTML="",(L(t,e)[n-1]||[]).forEach(r=>{let o=s.content.cloneNode(!0);o.querySelector("[data-id]").textContent=r.id,o.querySelector("[data-title]").textContent=r.title,o.querySelector("[data-body]").textContent=r.body,o.querySelector("[data-tags]").textContent=r.tags.join(", "),o.querySelector("[data-views]").textContent=r.views,o.querySelector("[data-likes]").textContent=r.reactions.likes,o.querySelector("[data-dislikes]").textContent=r.reactions.dislikes,a.appendChild(o)})}function v(t){let e=document.getElementById("live-region");e&&(e.textContent="",setTimeout(()=>{e.textContent=t},50))}function T(t,e){let n=t.querySelector(`button.page-number[data-page-number="${e}"]`);n&&n.focus()}function S(t){let e=new URLSearchParams(window.location.search),n=parseInt(e.get("page"),10);return!isNaN(n)&&n>=1&&n<=t?n:1}function y(){let t=document.createElement("span");return t.textContent="\u2026",t.classList.add("ellipsis"),t.setAttribute("aria-hidden","true"),t}function q(t,e,n,a){t==="1"?n.setAttribute("disabled",""):n.removeAttribute("disabled"),t===e.toString()?a.setAttribute("disabled",""):a.removeAttribute("disabled")}function w(t,e){let n=document.getElementById("paginator"),a=document.createElement("button"),s=document.createElement("button"),i=Math.ceil(t.length/e),m=4;S(i),y();function r(d){let c=document.createElement("button");return c.textContent=d,C(c,{type:"button",class:"page-number",tabindex:"0","aria-current":d===o?"page":null}),c.dataset.pageNumber=d,c.addEventListener("click",()=>{l(d)}),c}let o=S();a.textContent="Previous",a.classList.add("previous-next-btn","previous-btn"),a.setAttribute("type","button"),s.textContent="Next",s.classList.add("previous-next-btn","next-btn"),s.setAttribute("type","button");function l(d){o=d,B(),setTimeout(()=>{P(t,e,o),v(`Page ${o}`),T(n,o),q(o.toString(),i,a,s);let c=`${window.location.pathname}?page=${o}`;window.history.pushState({page:o},"",c),g(),E()},250)}a.addEventListener("click",()=>{o>1&&l(o-1)}),s.addEventListener("click",()=>{o<i&&l(o+1)});function g(){let d=n.querySelector(".page-numbers-container");d&&d.remove();let c=document.createElement("ul");c.classList.add("page-numbers-container"),n.contains(a)||n.insertBefore(a,n.firstChild),n.contains(s)||n.appendChild(s);function f(u){let p=document.createElement("li");return p.appendChild(u),p}if(i<=m)for(let u=1;u<=i;u++)c.appendChild(f(r(u)));else{c.appendChild(f(r(1)));let u=Math.max(2,o-1),p=Math.min(i-1,o+1);o<=2&&(u=2,p=3),o>=i-1&&(u=i-2,p=i-1),u>2&&c.appendChild(f(y()));for(let x=u;x<=p;x++)c.appendChild(f(r(x)));p<i-1&&c.appendChild(f(y())),c.appendChild(f(r(i)))}n.insertBefore(c,s)}n.appendChild(a),n.appendChild(s),g(),l(o)}function A(t){return h(this,null,function*(){try{let e=t.posts;if(!Array.isArray(e))throw new Error("Posts data is not an array");if(e.length===0)throw new Error("Posts array is empty");w(e,5)}catch(e){console.error("Error processing posts data:",e);let n=document.getElementById("posts-page-container");n&&(n.textContent="Failed to load posts.")}})}var R="./json/posts.json";function I(){return h(this,null,function*(){try{let t=yield fetch(R);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);let e=yield t.json();A(e)}catch(t){console.error("Pagination load error:",t)}})}b();k();I();})();
